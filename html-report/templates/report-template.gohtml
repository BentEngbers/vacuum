<!DOCTYPE html>
<html lang="en" class="sl-theme-dark">
{{- template "header" . -}}
<body class="terminal">
<div class="container">
    <section class="terminal-nav">
        <header class="terminal-logo">
            <div class="logo">
                <a href="https://quobix.com/vacuum" class="no-style">vacuum</a>
            </div>
        </header>
    </section>
</div>
<hr class="header"/>


<div class="container">


{{/*    <sl-tab-group>*/}}
{{/*        <sl-tab slot="nav" panel="general">General</sl-tab>*/}}
{{/*        <sl-tab slot="nav" panel="custom">Custom</sl-tab>*/}}
{{/*        <sl-tab slot="nav" panel="advanced">Advanced</sl-tab>*/}}
{{/*        <sl-tab slot="nav" panel="disabled" disabled>Disabled</sl-tab>*/}}
{{/*        <sl-tab-panel name="general">This is the general tab panel.</sl-tab-panel>*/}}
{{/*        <sl-tab-panel name="custom">This is the custom tab panel.</sl-tab-panel>*/}}
{{/*        <sl-tab-panel name="advanced">This is the advanced tab panel.</sl-tab-panel>*/}}
{{/*        <sl-tab-panel name="disabled">This is a disabled tab panel.</sl-tab-panel>*/}}
{{/*    </sl-tab-group>*/}}

    <section class="report-statistics">
        <sl-card class="card-header">
            <div slot="header">
                Report Quality
            </div>

            <div class="quality">
                88%
            </div>
        </sl-card>

        <category-piechart>
            nice.
        </category-piechart>

        <table>
            <tr>
                <td>Filesize:</td>
                <td>{{ .Statistics.FilesizeKB }}KB</td>
            </tr>
            <tr>
                <td>Type:</td>
                <td>{{ .Statistics.SpecType }}</td>
            </tr>
            <tr>
                <td>Format:</td>
                <td>{{ .Statistics.SpecFormat }}</td>
            </tr>
            <tr>
                <td>Version:</td>
                <td>{{ .Statistics.Version }}</td>
            </tr>
            <tr>
                <td>References:</td>
                <td>{{ .Statistics.References }}</td>
            </tr>
            <tr>
                <td>External Docs:</td>
                <td>{{ .Statistics.ExternalDocs }}</td>
            </tr>
            <tr>
                <td>Parameters:</td>
                <td>{{ .Statistics.Parameters }}</td>
            </tr>
        </table>

        <table>
            <tr>
                <td>Links:</td>
                <td>{{ .Statistics.Links }}</td>
            </tr>
            <tr>
                <td>Paths:</td>
                <td>{{ .Statistics.Paths }}</td>
            </tr>
            <tr>
                <td>Operations:</td>
                <td>{{ .Statistics.Operations }}</td>
            </tr>
            <tr>
                <td>Tags:</td>
                <td>{{ .Statistics.Tags }}</td>
            </tr>
            <tr>
                <td>Examples:</td>
                <td>{{ .Statistics.Examples }}</td>
            </tr>
            <tr>
                <td>Enums:</td>
                <td>{{ .Statistics.Enums }}</td>
            </tr>
            <tr>
                <td>Security Defs:</td>
                <td>{{ .Statistics.Security }}</td>
            </tr>
        </table>

    </section>

    <script>
        // chart needs data
        const catChart = document.querySelector('category-piechart')
        if (catChart) {
          catChart.setChartData(statisticsData);
        } else {
          alert('Something went really wrong.');
        }
    </script>
    <hr class="standard-margin-bt"/>
    <html-report>
        <section class="report-grid" slot="navigation">
            <nav>
                <rule-category-navigation default="all">
                {{- with .RuleCategories -}}
                {{- range . }}
                    <rule-category-link name="{{ .Id }}" description="{{ .Description }}">
                        {{ .Name }}
                    </rule-category-link>
                {{- end }}
                {{- end }}
                </rule-category-navigation>
                <section id="category-description">
                </section>
            </nav>

            <main class="category-result-grid">
            {{- $allResults := .RuleResults -}}
            {{- $specString := .SpecString -}}
            {{- with .RuleCategories -}}
            {{- range . }}
                <category-report slot="reports" id="{{ .Id }}">
                    {{-  $ruleResults := extractResultsForCategory .Id $allResults -}}
                    {{- $truncated := $ruleResults.Truncated -}}
                    <category-rules>
                    {{- with $ruleResults.Rules -}}
                    {{- range . }}
                        <category-rule ruleIcon="{{ ruleSeverityIcon .Rule.Severity }}" ruleId="{{ .Rule.Id }}" description="{{ .Rule.Description }}" numResults={{ .Seen }} truncated={{ $truncated }}>
                                {{- with .Results -}}
                                {{- range . }}
                                <category-rule-result slot="results" message="{{ .Message }}" ruleId="{{ .Rule.Id }}" startLine='{{ .StartNode.Line }}' startCol='{{ .StartNode.Column }}' endLine='{{ .EndNode.Line }}' endCol='{{ .EndNode.Column }}' path="{{ .Path }}">
                                    {{ renderSource . $specString }}
                                </category-rule-result>
                                {{- end -}}
                                {{- end -}}

                        </category-rule>
                    {{- end -}}
                    {{- end -}}
                    </category-rules>
                </category-report>
            {{- end }}
            {{- end }}
            </main>
        </section>
        <violation-drawer slot="drawer"></violation-drawer>
    </html-report>
</div>

{{- if not .TestMode -}}
<script>
    {{ .HydrateJS }}
</script>
{{- else -}}
<script src="http://localhost:8080/js/hydrate.js"></script>
{{- end -}}
</body>
<div class="container">
{{- template "footer" . -}}
</div>
</html>


